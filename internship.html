<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Internship Tracker â€“ Pro</title>
  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet" />
    <style>
    :root {
      --bg: linear-gradient(135deg, #74ebd5 0%, #9face6 100%);
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --primary-1: #4481eb;
      --primary-2: #04befe;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --border: #e5e7eb;
      --shadow: 0 10px 30px rgba(0,0,0,.12);
      --radius: 14px;
    }

    * { box-sizing: border-box; margin:0; padding:0; }
    html, body { height: 100%; font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color: var(--text); background: var(--bg); }
    a { text-decoration:none; color: inherit; }

    /* Layout */
    .app { display: grid; grid-template-columns: 280px 1fr; min-height: 100vh; transition: all .3s ease; }

    /* Sidebar */
    .sidebar {
      background: rgba(255,255,255,.95);
      backdrop-filter: blur(6px);
      border-right: 1px solid var(--border);
      padding: 18px;
      position: sticky;
      top: 0;
      height: 100vh;
      overflow-y: auto;
      transition: transform .25s ease;
      z-index: 50;
    }

    .brand { display: flex; align-items: center; gap: 10px; font-weight: 800; font-size: 1.15rem; margin-bottom: 14px; }
    .brand i { font-size: 1.35rem; background: linear-gradient(45deg,var(--primary-1),var(--primary-2)); -webkit-background-clip: text; color: transparent; }

    .hamburger {
      display: none;
      position: fixed; top: 14px; left: 14px; z-index: 60;
      width: 44px; height: 44px; border-radius: 12px; border: none;
      background: linear-gradient(45deg,var(--primary-1),var(--primary-2));
      color: #fff; box-shadow: var(--shadow); cursor: pointer; font-size: 22px;
    }

    .menu-section { margin-top: 12px; }
    .menu-title { font-size: .9rem; color: var(--muted); font-weight: 700; letter-spacing: .08em; margin: 14px 0 8px;; }

    .menu-item { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 12px; cursor: pointer; border: 1px solid transparent; transition: all .2s ease; }
    .menu-item:hover { background: #f8fafc; border-color: var(--border); }
    .menu-item i { font-size: 20px; }
    .menu-item .grow { flex: 1; }

    .upload-row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
    .upload-actions { margin-left: auto; display: flex; gap: 6px; }
    .chip { font-size: 12px; padding: 4px 8px; border-radius: 999px; background: #eef2ff; border: 1px solid #e0e7ff; color: #3730a3; }

    .file-list { margin-top: 8px; display: grid; gap: 8px; }
    .file-item { display: flex; align-items: center; gap: 10px; padding: 8px 10px; border: 1px dashed var(--border); border-radius: 12px; background: #fff; }
    .file-item a { font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: var(--primary-1); }
    .file-item .actions { margin-left: auto; display: flex; gap: 6px; }
    .icon-btn { border: none; background: #f1f5f9; border-radius: 10px; padding: 8px; cursor: pointer; transition: all .2s ease; }
    .icon-btn:hover { background: #e2e8f0; }

    /* Main */
    .main { padding: 26px; max-width: 1200px; width: 100%; margin: 0 auto; transition: all .3s ease; }
    h1 { margin: 10px 0 18px; }

    .card { background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow); padding: 18px; }
    .grid { display: grid; gap: 18px; }

    .form-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
    .input, select { width: 100%; padding: 12px 14px; border-radius: 12px; border: 2px solid var(--border); font-size: 15px; }
    .btn { padding: 12px 14px; border: none; border-radius: 12px; cursor: pointer; font-weight: 700; background: linear-gradient(45deg,var(--primary-1),var(--primary-2)); color:#fff; transition: all .2s ease; }
    .btn:hover { opacity: .9; }
    .btn.secondary { background: #f1f5f9; color: #111827; }
    .btn.success { background: #10b981; }
    .btn.danger { background: #ef4444; }
    .btn.warning { background: #f59e0b; }

    .toolbar { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; justify-content: space-between; margin: 14px 0; }
    .toolbar-left, .toolbar-right { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }

    table { width: 100%; border-collapse: collapse; overflow: hidden; border-radius: 14px; background: #fff; box-shadow: var(--shadow); table-layout: fixed; }
    thead th { background: linear-gradient(45deg,var(--primary-1),var(--primary-2)); color: #fff; text-align: right; padding: 14px; cursor: pointer; user-select: none; }
    tbody td { padding: 12px 14px; border-bottom: 1px solid #f1f5f9; word-wrap: break-word; }
    tr:hover { background: #f9fafb; }
    .status-badge { padding: 6px 10px; border-radius: 999px; font-weight: 700; font-size: 12px; display: inline-block; text-align: center; }
    .inprogress { background: #ecfeff; color: #155e75; border: 1px solid #cffafe; }
    .completed { background: #ecfdf5; color: #065f46; border: 1px solid #bbf7d0; text-decoration: none; }
    .overdue { background: #fef2f2; color: #7f1d1d; border: 1px solid #fecaca; }

    .empty { text-align: center; color: var(--muted); padding: 16px; }

    .loader { display: none; width: 44px; height: 44px; border-radius: 50%; border: 4px solid #e5e7eb; border-top-color: #111827; margin: 16px auto; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg) } }

    .toast { position: fixed; right: 16px; bottom: 16px; background: #111827; color: #fff; padding: 12px 14px; border-radius: 12px; box-shadow: var(--shadow); opacity: 0; transform: translateY(8px); transition: .25s; z-index: 70; }
    .toast.show { opacity: 1; transform: translateY(0); }

    /* Responsive */
    @media (max-width: 1200px) { .form-grid { grid-template-columns: repeat(3,1fr); } }
    @media (max-width: 1024px) { .form-grid { grid-template-columns: repeat(2,1fr); } .app { grid-template-columns: 70px 1fr; } .sidebar.compact .hide-when-compact { display: none; } }
    @media (max-width: 800px) { .hamburger { display: inline-flex; align-items: center; justify-content: center; } .app { grid-template-columns: 1fr; } .sidebar { position:fixed ; left: 0; top: 0; bottom: 0; transform: translateX(-100%); width: 80%; max-width: 340px; } .sidebar.open { transform: translateX(0); } .main { padding: 70px 16px 24px; } table thead { display: none; } table, tbody, tr, td { display: block; width: 100%; } tbody tr { margin-bottom: 13px; border-radius: 12px; border:1px solid #e5e7eb; padding: 12px; background:#fff; } tbody td { padding:6px 10px; text-align:left; position:relative; } tbody td::before { content: attr(data-label); float:left; font-weight:700; text-transform: uppercase; } }
    @media (max-width: 500px) { .form-grid { grid-template-columns: 1fr; } .toolbar { flex-direction: column; align-items: stretch; } .toolbar-left, .toolbar-right { justify-content: space-between; width:100%; } }
  </style>
</head>
<body>
  <button class="hamburger" id="hamburger" aria-label="Open Menu"><i class="ri-menu-2-line"></i></button>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="brand"><i class="ri-briefcase-3-fill"></i> <span class="hide-when-compact">Internship Tracker</span></div>

      <div class="menu-section">
        <div class="menu-title">UPLOADS</div>
        <!-- Resume Upload Row -->
        <div class="menu-item upload-row">
          <i class="ri-file-paper-2-line"></i>
          <div class="grow">
            <div style="font-weight:700">Resume</div>
            <div class="chip" id="resumeStatus">No file</div>
          </div>
          <div class="upload-actions">
            <input type="file" id="resumeUpload" accept="application/pdf" hidden />
            <button class="icon-btn" title="Upload/Replace" onclick="triggerUpload('resumeUpload')"><i class="ri-upload-2-line"></i></button>
            <button class="icon-btn" title="Remove" onclick="removeStoredFile('resume')"><i class="ri-delete-bin-6-line"></i></button>
          </div>
        </div>
        <div class="file-list" id="resumeList"></div>

        <!-- Profile Upload Row (image or pdf) -->
        <div class="menu-item upload-row">
          <i class="ri-id-card-line"></i>
          <div class="grow">
            <div style="font-weight:700">Profile</div>
            <div class="chip" id="profileStatus">No file</div>
          </div>
          <div class="upload-actions">
            <input type="file" id="profileUpload" accept="image/*,application/pdf" hidden />
            <button class="icon-btn" title="Upload/Replace" onclick="triggerUpload('profileUpload')"><i class="ri-upload-2-line"></i></button>
            <button class="icon-btn" title="Remove" onclick="removeStoredFile('profile')"><i class="ri-delete-bin-6-line"></i></button>
          </div>
        </div>
        <div class="file-list" id="profileList"></div>

        <div class="menu-title">UTILS</div>
        <div class="menu-item" onclick="exportCSV()"><i class="ri-download-2-line"></i><span class="grow">Export CSV</span></div>
        <label class="menu-item" for="importJSON"><i class="ri-upload-cloud-2-line"></i><span class="grow">Import JSON</span></label>
        <input id="importJSON" type="file" accept="application/json" hidden />
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <h1>Internship Tracker</h1>

      <section class="card grid" aria-label="Create internship">
        <div class="form-grid">
          <input class="input" type="text" id="internshipTitle" placeholder="Internship Title" required />
          <input class="input" type="text" id="companyName" placeholder="Company Name" required />
          <input class="input" type="date" id="startDate" required />
          <select id="statusSelect" class="input">
            <option value="In Progress" selected>In Progress</option>
            <option value="Completed">Completed</option>
          </select>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn" onclick="addInternship()"><i class="ri-add-circle-line"></i> Add Internship</button>
          <button class="btn secondary" onclick="clearForm()"><i class="ri-eraser-line"></i> Clear</button>
        </div>
      </section>

      <div class="toolbar">
        <div class="toolbar-left">
          <input class="input" id="search" placeholder="Search title/companyâ€¦" oninput="renderTable()"/>
          <select class="input" id="statusFilter" onchange="renderTable()">
            <option value="all">All Status</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
          </select>
        </div>
        <div class="toolbar-right">
          <button class="btn secondary" onclick="markAllCompleted()"><i class="ri-check-double-line"></i> Mark All Completed</button>
          <button class="btn danger" onclick="deleteAll()"><i class="ri-delete-bin-7-line"></i> Delete All</button>
        </div>
      </div>

      <div class="loader" id="loader"></div>

      <section class="card">
        <table id="internshipTable" aria-label="Internships">
          <thead>
            <tr>
              <th onclick="sortBy('title')">Title <i class="ri-arrow-up-down-line"></i></th>
              <th onclick="sortBy('company')">Company <i class="ri-arrow-up-down-line"></i></th>
              <th onclick="sortBy('startDate')">Start Date <i class="ri-arrow-up-down-line"></i></th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div id="emptyState" class="empty" style="display:none;">No internships yet. Add your first one above ðŸš€</div>
      </section>

      <!-- Hidden preview section removed from main page as requested -->
    </main>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => document.querySelectorAll(sel);

    const tbody = document.getElementById('internshipTable').querySelector('tbody');
    const loader = document.getElementById('loader');
    const emptyState = document.getElementById('emptyState');

    let internships = JSON.parse(localStorage.getItem('internships') || '[]');
    let sortKey = null; let sortDir = 1; // 1=asc, -1=desc

    // Sidebar toggle
    const sidebar = document.getElementById('sidebar');
    const hamburger = document.getElementById('hamburger');
    hamburger.addEventListener('click', () => sidebar.classList.toggle('open'));
    // Close sidebar on route (menu) click for mobile
    sidebar.addEventListener('click', (e) => {
      if (e.target.closest('.menu-item') && window.innerWidth < 800) sidebar.classList.remove('open');
    });

    // Toast utility
    function toast(msg){
      const t = document.getElementById('toast');
      t.textContent = msg; t.classList.add('show');
      setTimeout(()=> t.classList.remove('show'), 2000);
    }

    // Form helpers
    function clearForm(){
      $('#internshipTitle').value = '';
      $('#companyName').value = '';
      $('#startDate').value = '';
      $('#statusSelect').value = 'In Progress';
    }

    function addInternship(){
      const title = $('#internshipTitle').value.trim();
      const company = $('#companyName').value.trim();
      const startDate = $('#startDate').value;
      const status = $('#statusSelect').value;

      if(!title || !company || !startDate){ alert('Please fill in all fields!'); return; }

      loader.style.display = 'block';
      setTimeout(()=>{
        const item = { id: crypto.randomUUID(), title, company, startDate, status };
        internships.push(item);
        persist();
        renderTable();
        clearForm();
        loader.style.display = 'none';
        toast('Internship added');
      }, 300);
    }

    function persist(){ localStorage.setItem('internships', JSON.stringify(internships)); }

    function renderTable(){
      let rows = [...internships];
      const q = $('#search').value?.toLowerCase() || '';
      const f = $('#statusFilter').value;

      if(q){ rows = rows.filter(r => r.title.toLowerCase().includes(q) || r.company.toLowerCase().includes(q)); }
      if(f !== 'all'){ rows = rows.filter(r => r.status === f); }

      if(sortKey){
        rows.sort((a,b)=>{
          const va = a[sortKey]; const vb = b[sortKey];
          if(sortKey === 'startDate') return (new Date(va) - new Date(vb)) * sortDir;
          return (''+va).localeCompare(''+vb) * sortDir;
        });
      }

      tbody.innerHTML = '';
      if(rows.length === 0){ emptyState.style.display = 'block'; return; }
      emptyState.style.display = 'none';

      rows.forEach(r => {
        const tr = document.createElement('tr');
        const badgeClass = r.status === 'Completed' ? 'completed' : 'inprogress';
        const isOverdue = (new Date(r.startDate) < new Date()) && r.status !== 'Completed';
        const statusClass = isOverdue ? 'overdue' : badgeClass;

        tr.innerHTML = `
          <td>${escapeHTML(r.title)}</td>
          <td>${escapeHTML(r.company)}</td>
          <td>${r.startDate}</td>
          <td><span class="status-badge ${statusClass}">${isOverdue ? 'Overdue' : r.status}</span></td>
          <td>
            <button class="btn success" style="padding:8px 10px" onclick="markCompleted('${r.id}')"><i class='ri-check-line'></i></button>
            <button class="btn warning" style="padding:8px 10px" onclick="editRow('${r.id}')"><i class='ri-pencil-line'></i></button>
            <button class="btn danger" style="padding:8px 10px" onclick="deleteRow('${r.id}')"><i class='ri-delete-bin-line'></i></button>
          </td>`;
        tbody.appendChild(tr);
      });
    }

    function sortBy(key){
      if(sortKey === key) sortDir = -sortDir; else { sortKey = key; sortDir = 1; }
      renderTable();
    }

    function markCompleted(id){
      const idx = internships.findIndex(x=>x.id===id);
      if(idx>-1){ internships[idx].status = 'Completed'; persist(); renderTable(); toast('Marked completed'); }
    }

    function editRow(id){
      const r = internships.find(x=>x.id===id);
      if(!r) return;
      const title = prompt('Edit title', r.title); if(title===null) return;
      const company = prompt('Edit company', r.company); if(company===null) return;
      const start = prompt('Edit start date (YYYY-MM-DD)', r.startDate); if(start===null) return;
      const status = prompt('Edit status (In Progress/Completed)', r.status); if(status===null) return;
      if(!title || !company || !/^\d{4}-\d{2}-\d{2}$/.test(start)) return alert('Invalid values');
      r.title = title.trim(); r.company = company.trim(); r.startDate = start; r.status = (status==='Completed'?'Completed':'In Progress');
      persist(); renderTable(); toast('Row updated');
    }

    function deleteRow(id){
      if(!confirm('Delete this internship?')) return;
      internships = internships.filter(x=>x.id!==id); persist(); renderTable(); toast('Deleted');
    }

    function markAllCompleted(){
      if(internships.length===0) return;
      internships = internships.map(x=>({...x,status:'Completed'}));
      persist(); renderTable(); toast('All marked completed');
    }

    function deleteAll(){
      if(!internships.length) return;
      if(!confirm('Delete ALL internships?')) return;
      internships = []; persist(); renderTable(); toast('All deleted');
    }

    // Reminders (runs every minute)
    function checkReminders(){
      const today = new Date();
      internships.forEach(r=>{
        const d = new Date(r.startDate);
        const diff = (d - today) / (1000*60*60*24);
        if(diff <= 1 && diff > 0 && r.status !== 'Completed'){
          toast(`Reminder: "${r.title}" at ${r.company} starts tomorrow!`);
        }
      });
    }
    setInterval(checkReminders, 60000);

    // CSV Export
    function exportCSV(){
      if(!internships.length) return toast('Nothing to export');
      const headers = ['Title','Company','Start Date','Status'];
      const rows = internships.map(r=>[r.title,r.company,r.startDate,r.status]);
      const csv = [headers.join(','), ...rows.map(r=>r.map(v=>`"${(v+'').replaceAll('"','\"')}"`).join(','))].join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'internships.csv'; a.click();
    }

    // JSON Import
    document.getElementById('importJSON').addEventListener('change', function(){
      const f = this.files[0]; if(!f) return;
      const reader = new FileReader();
      reader.onload = (e)=>{
        try {
          const data = JSON.parse(e.target.result);
          if(!Array.isArray(data)) throw new Error('Invalid format');
          internships = data; persist(); renderTable(); toast('Imported');
        } catch(err){ alert('Invalid JSON file'); }
      };
      reader.readAsText(f);
      this.value = '';
    });

    // Uploads (in sidebar only)
    function triggerUpload(id){ document.getElementById(id).click(); }

    function validateFile(type, file){
      if(type==='resume' && file.type !== 'application/pdf'){ alert('Resume must be a PDF'); return false; }
      if(file.size > 10*1024*1024){ alert('File too large (max 10MB)'); return false; }
      return true;
    }

    function handleUploadInput(inputId, storageKey){
      const el = document.getElementById(inputId);
      el.addEventListener('change', function(){
        const file = this.files[0]; if(!file) return;
        if(!validateFile(storageKey, file)) { this.value=''; return; }
        const reader = new FileReader();
        reader.onload = (e)=>{
          const fileData = { name: file.name, data: e.target.result, type: file.type, ts: Date.now() };
          localStorage.setItem(storageKey, JSON.stringify(fileData));
          updateUploadUI();
          toast(`${storageKey.toUpperCase()} uploaded`);
        };
        // PDFs as data URLs; large PDFs are fine for local use.
        reader.readAsDataURL(file);
        this.value = '';
      });
    }

    function removeStoredFile(key){
      if(!localStorage.getItem(key)) return;
      if(!confirm(`Remove stored ${key}?`)) return;
      localStorage.removeItem(key);
      updateUploadUI();
      toast(`${key.toUpperCase()} removed`);
    }

    function updateUploadUI(){
      const resume = JSON.parse(localStorage.getItem('resume') || 'null');
      const profile = JSON.parse(localStorage.getItem('profile') || 'null');

      const resumeStatus = document.getElementById('resumeStatus');
      const profileStatus = document.getElementById('profileStatus');
      const resumeList = document.getElementById('resumeList');
      const profileList = document.getElementById('profileList');

      resumeStatus.textContent = resume ? '1 file' : 'No file';
      profileStatus.textContent = profile ? '1 file' : 'No file';

      resumeList.innerHTML = '';
      profileList.innerHTML = '';

      if(resume){
        const item = createFileItem(resume, 'resume');
        resumeList.appendChild(item);
      }
      if(profile){
        const item = createFileItem(profile, 'profile');
        profileList.appendChild(item);
      }
    }

    function createFileItem(file, key){
      const wrap = document.createElement('div');
      wrap.className = 'file-item';
      wrap.innerHTML = `<i class="ri-file-${file.type==='application/pdf' ? 'pdf' : 'line'}-line"></i>
        <a href="${file.data}" download="${file.name}" title="Click to download">${escapeHTML(file.name)}</a>
        <div class="actions">
          <button class="icon-btn" title="Replace" onclick="triggerUpload('${key}Upload')"><i class="ri-refresh-line"></i></button>
          <button class="icon-btn" title="Remove" onclick="removeStoredFile('${key}')"><i class="ri-close-circle-line"></i></button>
        </div>`;
      return wrap;
    }

    // Security: basic escaping for table text
    function escapeHTML(str){
      return str.replace(/[&<>"]+/g, s=> ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[s]));
    }

    // Initialize
    handleUploadInput('resumeUpload','resume');
    handleUploadInput('profileUpload','profile');
    updateUploadUI();
    renderTable();

    // Initial reminder check once
    checkReminders();
  </script>
</body>
</html>

